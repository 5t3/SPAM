<!DOCTYPE html>
<html>
	<head>
	<meta equiv-http="Content-Type" content="text/html; charset=UTF-8">
	<title>SPAM :: Social Production of Audiovisual Microblogs</title>
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"> </script>
	<link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css" />
	<script type="text/javascript" src="ext/ext-all-debug.js"> </script>
	<script type="text/javascript" src="app.js"> </script>
	<script type="text/javascript">
		// Import any class of ExtJS 4
		Ext.require (['*']);
		
		// Set loading configuration
		Ext.Loader.setConfig ({
			enabled : true
		});
		
		// Geolocation
		Ext.Function.defer (function () {
			var latlng = new google.maps.LatLng(44.49733, 11.356403);
			var myOptions = {
				zoom: 0,
				center: latlng,
				mapTypeId: google.maps.MapTypeId.ROADMAP
			};
			var map = new google.maps.Map(document.getElementById("geoloc"), myOptions);
		} , 2500);
		
		// TODO: use another way to setup cookies
		// After 1,5 sec, check cookies and use them if exists
		Ext.Function.defer (function () {
			// If there is server cookie
			if (Ext.util.Cookies.get ('PHPSESSID') != null)
			{
				// And if there is client cookie
				var userCookie = Ext.util.Cookies.get ('SPAMlogin');
			
				if (userCookie != null) {
					// Set login
					Ext.getCmp('loginButton').setText ('Logout');

					Ext.getCmp ('userField').setVisible (false);
		
					Ext.getCmp('userPanel').setTitle ('User :: ' + userCookie);
					Ext.getCmp('userPanel').setVisible (true);
		
					Ext.getCmp('newPostButton').setVisible (true);
				}
			}
		} , 1500);
		
		// When the page is loaded
		Ext.onReady (function () {
			// Thesaurus request
			// Recent posts
			// Geo Location
		});
	</script>
	<!-- TODO: make style.css file for these rules -->
	<style type="text/css">
		#header {
			background: #7F99BE url(ext/resources/images/layout-browser-hd-bg.gif) repeat-x center;
		}
		#header h1 {
			font-size: 16px;
			color: #fff;
			font-weight: normal;
			padding: 5px 10px;
		}
	</style>
	</head>
	<body>
	</body>
</html>
